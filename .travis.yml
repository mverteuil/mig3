dist: xenial
language: python
sudo: false
services:
  - postgresql
env:
  - "DATABASE_URL=postgres://postgres:postgres@localhost:5432/postgres"
python:
  - "3.7"
install:
  - "pip install pipenv==2018.11.26"
  - "pipenv install --dev"
  - "barb -z"
before_script:
  - "curl -H 'Cache-Control: no-cache' https://raw.githubusercontent.com/fossas/fossa-cli/master/install.sh | sudo bash"
  - "pip freeze > requirements.txt"
  - "fossa init"
  - "fossa analyze"
script:
  - "python -m pytest"
after_success:
  - "pip install codacy-coverage==1.3.11"
  - "coverage xml"
  - "python-codacy-coverage -r coverage.xml"
